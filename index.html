<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Btn Testing</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">

  <!--<link rel="stylesheet" href="css/styles.css?v=1.0">-->

</head>

<body>
    <h2>Testing 18.0</h2>
		
<style type='text/css'>
	.embeddedServiceHelpButton .helpButton .uiButton {
		background-color: #005290;
		font-family: "Arial", sans-serif;
	}
	.embeddedServiceHelpButton .helpButton .uiButton:focus {
		outline: 1px solid #005290;
	}
	.testBTNClass {
		background-color: #005290;
	}
</style>

<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
<script type='text/javascript'>
	var initESW = function(gslbBaseURL) {
		embedded_svc.settings.displayHelpButton = true; //Or false
		embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'
			
		embedded_svc.settings.extraPrechatFormDetails = [{
		  "label": "First Name",
		  "transcriptFields":[ "Visitor_First_Name__c" ],
		  "displayToAgent": true
		}, {
		  "label": "Last Name",
		  "transcriptFields":[ "Visitor_Last_Name__c" ],
		  "displayToAgent": true
		}, {
		  "label": "Email",
		  "transcriptFields":[ "Visitor_Email__c" ],
		  "displayToAgent": true
		}, {
		  "label": "Company",
		  "transcriptFields":[ "Visitor_Company__c" ],
		  "displayToAgent": true
		}];

		embedded_svc.settings.defaultMinimizedText = 'Chat Now'; //(Defaults to Chat with an Expert)
		embedded_svc.settings.disabledMinimizedText = 'Offline'; //(Defaults to Agent Offline)

		//embedded_svc.settings.loadingText = ''; //(Defaults to Loading)
		//embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)

		// Settings for Chat
		embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
		// Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
		// Returns a valid button ID.
			if(prechatFormData[4].value === "A product question or recommendation"){
				console.log("Routing to Inside Sales...");	
				//console.log(prechatFormData[4].value);	
				return "5732100000001MY";
			}
			else if(prechatFormData[4].value === "My existing order or account information"){
				console.log("Routing to Inside Sales...");
				//console.log(prechatFormData[4].value);
				return "5732100000001MY";
			}
			else if(prechatFormData[4].value === "Printer or software support"){
				console.log("Routing to Tech Support...");
				//console.log(prechatFormData[4].value);
				return "5732100000001Md";
			}
		};
		//embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields
		//embedded_svc.settings.fallbackRouting = []; //An array of button IDs, user IDs, or userId_buttonId
		//embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Defaults to Contact Us)

		embedded_svc.settings.enabledFeatures = ['LiveAgent'];
		embedded_svc.settings.entryFeature = 'LiveAgent';

		embedded_svc.init(
			'https://brady--americas.my.salesforce.com',
			'https://americas-brady.cs26.force.com/docs',
			gslbBaseURL,
			'00D21000000ABDj',
			'Lightning_Inside_Sales',
			{
				baseLiveAgentContentURL: 'https://c.la4-c1cs-phx.salesforceliveagent.com/content',
				deploymentId: '5722100000001K8',
				buttonId: '5732100000001MY',
				baseLiveAgentURL: 'https://d.la4-c1cs-phx.salesforceliveagent.com/chat',
				eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04I210000008OO8EAM_170372ceb28',
				isOfflineSupportEnabled: false
			}
		);
	};

	if (!window.embedded_svc) {
		console.log("in load...");
		var s = document.createElement('script');
		s.setAttribute('src', 'https://brady--americas.my.salesforce.com/embeddedservice/5.0/esw.min.js');
		s.onload = function() {
			initESW(null);
			console.log("on load...");
			console.log(document.querySelector('#helpButtonSpan'));
		};
		//myFunction2();
		document.body.appendChild(s);
		
	} else {
		
		console.log("in else...");
		//setInterval(function(){ console.log(document.querySelector(".message")); }, 8000);
		//console.log(document.querySelector('#helpButtonSpan'));
		initESW('https://service.force.com');
		//console.log(document.querySelector('#helpButtonSpan'));
	}
</script>
	
	
	
<script>
function myFunction() {
	console.log('getElementsByClassName[0]');
  document.getElementsByClassName("helpButtonEnabled")[0].click()
}
</script>
	
<form>
<button class="testBTNClass" id="myCheck" type="button" onclick="myFunction()">Offline</button>
<!--<input type="checkbox" id="myCheck" onmouseover="myFunction()" onclick="">-->
</form>
	
<span id="root" class="rootSpanWording">loading...</span>	
	
<script>
      setTimeout(function() {
	      console.log('Changed the span text!');
        document.getElementById('root').innerHTML = "loaded...";
      }, 3000);
</script>		
	
		
    <script>
	    
var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
  //var list = document.querySelector('ol');
 
  var observer = new MutationObserver(function(mutations) {
	  
    mutations.forEach(function(mutation) {
	    console.log(test);
      if (mutation.type === 'childList') {
        var list_values = [].slice.call(list.children)
            .map( function(node) { return node.innerHTML; })
            .filter( function(s) {
              if (s === '<br />') {
                return false;
              }
              else {
                return true;
              }
        });
        console.log(list_values);
      }
    });
  });
 
  observer.observe(document, {
  	attributes: true,
  	childList: true,
  	characterData: true,
	subtree: true  
   });	    
	    
	    
	    
	    
	    
/*	    
var insertedNodes = [];
var observer = new MutationObserver(function(mutations) {
 mutations.forEach(function(mutation) {
	 
	 console.log(mutation.type);
	 console.log(mutation.nodeValue);
   for (var i = 0; i < mutation.addedNodes.length; i++)
     insertedNodes.push(mutation.addedNodes[i]);
 })
});
observer.observe(document, { childList: true });
console.log(insertedNodes);	    
//here	    
*/	 
	    
	    
	    
	    
	    
	    
/*	    
	    const observer = new MutationObserver(function
(mutations) {
 mutations.forEach(function (mutation) {
	if (mutation.addedNodes.length) {
   		console.log(mutation.addedNodes[0]);
   }

 })

})

const bears = document.querySelector('#helpButtonSpan');
	    console.log("helpButtonSpan");
	    console.log(document.querySelector('#helpButtonSpan'));
	    console.log(document.querySelectorAll(".rootSpanWording")[0]);
	    console.log(document.querySelector('#root'));
observer.observe(bears, {
childList: true

});
*/	    
	    /*
	    function myFunction2() {
	// Select the node that will be observed for mutations
	//const targetNode = document.getElementById('root');
	const targetNode = document.getElementsByClassName("helpButtonEnabled")[0];
	console.log(document.getElementsByClassName("helpButtonEnabled")[0]);    

	// Options for the observer (which mutations to observe)
	const config = { attributes: true, childList: true, subtree: true, characterData:true, attributeOldValue : true };

	// Callback function to execute when mutations are observed
	const callback = function(mutationsList, observer) {
	    // Use traditional 'for loops' for IE 11
	    for(let mutation of mutationsList) {
		if (mutation.type === 'childList') {
			//var btn3 = document.getElementById("root");
			//btn3.value = 'online, chat us'; // will just add a hidden value
			//btn3.innerHTML = 'online, chat us';
		    //document.getElementById("myCheck").disabled = false;
		    console.log('A child node has been added or removed. v2');
		    console.log(targetNode.value);	
		    console.log(targetNode.innerHTML);	
		    console.log(mutation);		
		}
		else if (mutation.type === 'attributes') {
		    console.log('The ' + mutation.attributeName + ' attribute was modified...');
		}
	    }
	};

	// Create an observer instance linked to the callback function
	const observer = new MutationObserver(callback);

	// Start observing the target node for configured mutations
	observer.observe(targetNode, config);
	    }
	    
	    */
    </script>	
	
	
	
	
	<ul id="myList">
  <li>Coffee</li>
  <li>Tea</li>
</ul>

<button onclick="myFunction200()">Try it</button>

<script>
function myFunction200() {
  var node200 = document.createElement("LI");
  var textnode = document.createTextNode("Water");
  node200.appendChild(textnode);
  document.getElementById("myList").appendChild(node200);
}
</script>

</body>
</html>
